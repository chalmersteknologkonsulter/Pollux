{"ast":null,"code":"var _jsxFileName = \"/Users/ctkit/git/Pollux/Web/src/app/screens/Product/components/CategoryDetails.js\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { TextField, Select, InputLabel, MenuItem, Fab, Grid, Checkbox, FormControlLabel, Box, Input, Button, IconButton } from '@material-ui/core';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport Typography from '@material-ui/core/Typography';\nimport { formatRoute } from 'react-router-named-routes';\nimport { api } from '../../../helpers/apiHelper';\nimport sortBy from 'lodash/sortBy';\nimport clsx from 'clsx';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2)\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500]\n  },\n  gridContainer: {\n    display: 'flex',\n    alignItems: 'baseline',\n    paddingLeft: 30,\n    justifyContent: 'space-between'\n  },\n  productWrapper: {\n    margin: '40px',\n    border: '1px solid'\n  },\n  outterContainer: {\n    display: 'block',\n    border: '1px solid',\n    margin: 25\n  },\n  container: {\n    display: 'flex',\n    borderBottom: '1px solid',\n    alignItems: 'center',\n    backgroundColor: '#D7DBDD'\n  },\n  left: {\n    flex: 0.1,\n    minWidth: 25,\n    textAlign: 'center',\n    backgroundColor: '#D7DBDD'\n  },\n  right: {\n    flex: 0.1,\n    minWidth: 25,\n    backgroundColor: '#D7DBDD'\n  },\n  componentPanelWrapper: {\n    flex: 3\n  },\n  componentPanel: {\n    display: 'flex',\n    borderBottom: '1px solid'\n  },\n  caption: {\n    flex: 1,\n    backgroundColor: '#E5E7E9',\n    padding: 8\n  },\n  control: {\n    flex: 3,\n    backgroundColor: 'white',\n    padding: 5\n  },\n  moreInfoContainer: {\n    display: 'flex',\n    width: '100%'\n  },\n  moreInfoControlWrapper: {\n    margin: 10\n  },\n  moreInfoControl: {\n    display: 'flex',\n    borderBottom: '1px solid',\n    height: 40,\n    verticalAlign: 'middle',\n    alignItems: 'center'\n  },\n  cellIndexPanel: {\n    display: 'flex',\n    minWidth: 25,\n    height: '100%',\n    verticalAlign: 'middle',\n    alignItems: 'center'\n  },\n  cellIndexRowColor: {\n    backgroundColor: '#D7DBDD'\n  }\n}));\nexport default function CategoryDeatails(props) {\n  const classes = useStyles();\n  const {\n    location,\n    history\n  } = props;\n  const {\n    state: data\n  } = location; //Filtering out default attribute\n  //Default attribute type is 1\n\n  const attributes = data.attributes.filter(item => item.Type !== 1); //   const { Title, Description, Application, ImageURL, Products } = data.category;\n\n  const [category, setValues] = React.useState({\n    CategoryId: data.category ? data.category.Id : '',\n    Title: data.category ? data.category.Title : '',\n    Description: data.category ? data.category.Description : '',\n    Application: data.category ? data.category.Application : '',\n    ImageURL: data.category ? data.category.ImageURL : '',\n    Products: [{\n      ProductId: '',\n      Artikelnr: '',\n      EANCode: '',\n      Beskrivning: '',\n      Options: []\n    }]\n  });\n  React.useEffect(() => {\n    if (data && data.category) {\n      getProducts(category.CategoryId);\n    }\n  }, []);\n\n  const getProducts = categoryId => {\n    api.get('/product/product-by-category', {\n      params: {\n        categoryId: categoryId\n      }\n    }).then(res => {\n      //Sorted by article number\n      let sortedProducts = sortBy(res.data.Products, 'ArticleNumber');\n      let attributeMap = res.data.Attributes.filter(item => item.Type != 1);\n      let products = sortedProducts.map(item => {\n        return {\n          ProductId: item.ProductId,\n          Artikelnr: item.ArticleNumber,\n          Beskrivning: item.Description,\n          EANCode: item.EANCode,\n          Options: attributeMap.map(option => {\n            return {\n              AttributeId: option.Id,\n              Value: item[option.FieldName]\n            };\n          })\n        };\n      });\n      setValues({ ...category,\n        ['Products']: products\n      });\n    });\n  };\n\n  const addItem = index => {\n    let newProduct = {\n      Artikelnr: '',\n      EANCode: '',\n      Beskrivning: '',\n      Options: []\n    };\n    const products = category.Products;\n    products.splice(index + 1, 0, newProduct);\n    setValues({ ...category,\n      ['Products']: products\n    });\n  };\n\n  const addOption = index => {\n    const products = category.Products;\n    const option = {\n      AttributeId: '',\n      Value: ''\n    };\n    products[index].Options.push(option);\n    setValues({ ...category,\n      ['Products']: products\n    });\n  };\n\n  const handleChange = prop => event => {\n    setValues({ ...category,\n      [prop]: event.target.value\n    });\n  };\n\n  const handleProductPropertiesChange = (value, index, name) => {\n    const products = category.Products;\n    products[index][name] = value;\n    setValues({ ...category,\n      ['Products']: products\n    });\n  };\n\n  const handleOptionChange = (value, productIndex, OptionIndex, name) => {\n    const products = category.Products;\n    products[productIndex].Options[OptionIndex][name] = value;\n    setValues({ ...category,\n      ['Products']: products\n    });\n  };\n\n  const handleChangeWithIndex = (prop, index) => event => {\n    setValues({ ...category,\n      [prop]: event.target.value\n    });\n  };\n\n  const handleSubmit = () => {\n    if (category.CategoryId) {\n      api.put('/product-category/', category).then(response => backToList());\n    } else {\n      api.post('/product-category/', category).then(response => backToList());\n    }\n  };\n\n  const backToList = () => {\n    const newRoute = formatRoute('/page/Products');\n    props.history.push({\n      pathname: newRoute,\n      state: null\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    item: true,\n    xs: 6,\n    className: classes.gridContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    id: \"Title\",\n    label: \"Kategori\",\n    name: \"Title\",\n    size: \"small\",\n    value: category.Title,\n    onChange: handleChange('Title'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    multiline: true,\n    rowsMax: 4,\n    id: \"Description\",\n    label: \"Beskrivning\",\n    name: \"Description\",\n    value: category.Description,\n    onChange: handleChange('Description'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    multiline: true,\n    rowsMax: 2,\n    id: \"Application\",\n    label: \"Anv\\xE4ndningsomr\\xE5de\",\n    name: \"Application\",\n    value: category.Application,\n    onChange: handleChange('Application'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    id: \"ImageURL\",\n    label: \"Foto URL\",\n    name: \"ImageURL\",\n    value: category.ImageURL,\n    onChange: handleChange('ImageURL'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.outterContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }\n  }, category.Products.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.left,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  }, \" \", index + 1, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.componentPanelWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.componentPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 19\n    }\n  }, \"Artikelnr\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.control,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    fullWidth: true,\n    onChange: event => {\n      let {\n        name,\n        value\n      } = event.target;\n      handleProductPropertiesChange(value, index, 'Artikelnr');\n    },\n    name: 'Artikelnr' + index,\n    value: item.Artikelnr,\n    index: index,\n    placeholder: \"Artikelnr\",\n    inputProps: {\n      'aria-label': 'Artikelnr'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.componentPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 19\n    }\n  }, \"EANCode\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.control,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    fullWidth: true,\n    onChange: event => {\n      let {\n        name,\n        value\n      } = event.target;\n      handleProductPropertiesChange(value, index, 'EANCode');\n    },\n    name: 'EANCode',\n    value: item.EANCode,\n    placeholder: \"EANCode\",\n    inputProps: {\n      'aria-label': 'EANCode'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.componentPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 19\n    }\n  }, \"Beskrivning\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.control,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    fullWidth: true,\n    onChange: event => {\n      let {\n        name,\n        value\n      } = event.target;\n      handleProductPropertiesChange(value, index, 'Beskrivning');\n    },\n    name: 'Beskrivning' + index,\n    value: item.Beskrivning,\n    placeholder: \"Beskrivning\",\n    inputProps: {\n      'aria-label': 'Beskrivning'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.componentPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.moreInfoContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 21\n    }\n  }, \"Mer information\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.control,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.moreInfoControlWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: '1px solid'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.moreInfoControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.cellIndexPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 1,\n      borderLeft: '1px solid',\n      borderRight: '1px solid',\n      height: '100%',\n      paddingLeft: 4,\n      paddingTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 29\n    }\n  }, \"Ben\\xE4mning\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 1,\n      borderRight: '1px solid',\n      height: '100%',\n      paddingLeft: 4,\n      paddingTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 29\n    }\n  }, \"Data\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.cellIndexPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 29\n    }\n  })), item.Options.map((item, optionIndex) => /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.moreInfoControl,\n    key: optionIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.cellIndexPanel, classes.cellIndexRowColor),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.left,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 33\n    }\n  }, optionIndex + 1)), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 1,\n      borderLeft: '1px solid',\n      borderRight: '1px solid',\n      height: '100%',\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    fullWidth: true,\n    native: true,\n    value: item.AttributeId,\n    name: 'AttributeId',\n    onChange: event => {\n      let {\n        name,\n        value\n      } = event.target;\n      handleOptionChange(value, index, optionIndex, name);\n    },\n    inputProps: {\n      name: 'AttributeId',\n      id: 'age-native-simple'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    \"aria-label\": \"None\",\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 35\n    }\n  }), attributes.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    value: item.Id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 37\n    }\n  }, item.Title)))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 1,\n      borderRight: '1px solid',\n      height: '100%',\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    fullWidth: true,\n    placeholder: \"Data\",\n    value: item.Value,\n    name: 'Value',\n    onChange: event => {\n      let {\n        name,\n        value\n      } = event.target;\n      handleOptionChange(value, index, optionIndex, name);\n    },\n    inputProps: {\n      'aria-label': 'Value'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.cellIndexPanel, classes.cellIndexRowColor),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 31\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingTop: 10,\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      addOption(index);\n    },\n    color: \"secondary\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 27\n    }\n  }, \"L\\xE4gg till rad\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.right,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute',\n      right: -1,\n      bottom: -15,\n      zIndex: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 13\n    }\n  }, ' ', /*#__PURE__*/React.createElement(IconButton, {\n    color: \"secondary\",\n    size: \"small\",\n    onClick: () => {\n      addItem(index);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AddCircleOutlineIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 17\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingTop: 10,\n      margin: 20,\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      handleSubmit();\n    },\n    color: \"secondary\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 9\n    }\n  }, \"Skapa\")));\n}","map":{"version":3,"sources":["/Users/ctkit/git/Pollux/Web/src/app/screens/Product/components/CategoryDetails.js"],"names":["React","makeStyles","Card","CardActionArea","CardActions","CardContent","CardMedia","TextField","Select","InputLabel","MenuItem","Fab","Grid","Checkbox","FormControlLabel","Box","Input","Button","IconButton","AddCircleOutlineIcon","Typography","formatRoute","api","sortBy","clsx","useStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","gridContainer","display","alignItems","paddingLeft","justifyContent","productWrapper","border","outterContainer","container","borderBottom","backgroundColor","left","flex","minWidth","textAlign","componentPanelWrapper","componentPanel","caption","control","moreInfoContainer","width","moreInfoControlWrapper","moreInfoControl","height","verticalAlign","cellIndexPanel","cellIndexRowColor","CategoryDeatails","props","classes","location","history","state","data","attributes","filter","item","Type","category","setValues","useState","CategoryId","Id","Title","Description","Application","ImageURL","Products","ProductId","Artikelnr","EANCode","Beskrivning","Options","useEffect","getProducts","categoryId","get","params","then","res","sortedProducts","attributeMap","Attributes","products","map","ArticleNumber","option","AttributeId","Value","FieldName","addItem","index","newProduct","splice","addOption","push","handleChange","prop","event","target","value","handleProductPropertiesChange","name","handleOptionChange","productIndex","OptionIndex","handleChangeWithIndex","handleSubmit","put","response","backToList","post","newRoute","pathname","borderLeft","borderRight","paddingTop","optionIndex","id","bottom","zIndex"],"mappings":"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","sourcesContent":["// @flow\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {\n  TextField,\n  Select,\n  InputLabel,\n  MenuItem,\n  Fab,\n  Grid,\n  Checkbox,\n  FormControlLabel,\n  Box,\n  Input,\n  Button,\n  IconButton,\n} from '@material-ui/core';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport Typography from '@material-ui/core/Typography';\nimport { formatRoute } from 'react-router-named-routes';\nimport { api } from '../../../helpers/apiHelper';\nimport sortBy from 'lodash/sortBy';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n  gridContainer: {\n    display: 'flex',\n    alignItems: 'baseline',\n    paddingLeft: 30,\n    justifyContent: 'space-between',\n  },\n\n  productWrapper: {\n    margin: '40px',\n    border: '1px solid',\n  },\n  outterContainer: {\n    display: 'block',\n    border: '1px solid',\n    margin: 25,\n  },\n  container: {\n    display: 'flex',\n    borderBottom: '1px solid',\n    alignItems: 'center',\n    backgroundColor: '#D7DBDD',\n  },\n  left: {\n    flex: 0.1,\n    minWidth: 25,\n    textAlign: 'center',\n    backgroundColor: '#D7DBDD',\n  },\n  right: {\n    flex: 0.1,\n    minWidth: 25,\n    backgroundColor: '#D7DBDD',\n  },\n  componentPanelWrapper: {\n    flex: 3,\n  },\n  componentPanel: {\n    display: 'flex',\n    borderBottom: '1px solid',\n  },\n  caption: {\n    flex: 1,\n    backgroundColor: '#E5E7E9',\n    padding: 8,\n  },\n  control: {\n    flex: 3,\n    backgroundColor: 'white',\n    padding: 5,\n  },\n  moreInfoContainer: {\n    display: 'flex',\n    width: '100%',\n  },\n  moreInfoControlWrapper: {\n    margin: 10,\n  },\n  moreInfoControl: {\n    display: 'flex',\n    borderBottom: '1px solid',\n    height: 40,\n    verticalAlign: 'middle',\n    alignItems: 'center',\n  },\n  cellIndexPanel: {\n    display: 'flex',\n    minWidth: 25,\n    height: '100%',\n    verticalAlign: 'middle',\n    alignItems: 'center',\n  },\n  cellIndexRowColor: {\n    backgroundColor: '#D7DBDD',\n  },\n}));\nexport default function CategoryDeatails(props) {\n  const classes = useStyles();\n  const { location, history } = props;\n  const { state: data } = location;\n\n  //Filtering out default attribute\n  //Default attribute type is 1\n  const attributes = data.attributes.filter((item) => item.Type !== 1);\n\n  //   const { Title, Description, Application, ImageURL, Products } = data.category;\n\n  const [category, setValues] = React.useState({\n    CategoryId: data.category ? data.category.Id : '',\n    Title: data.category ? data.category.Title : '',\n    Description: data.category ? data.category.Description : '',\n    Application: data.category ? data.category.Application : '',\n    ImageURL: data.category ? data.category.ImageURL : '',\n    Products: [\n      {\n        ProductId: '',\n        Artikelnr: '',\n        EANCode: '',\n        Beskrivning: '',\n        Options: [],\n      },\n    ],\n  });\n\n  React.useEffect(() => {\n    if (data && data.category) {\n      getProducts(category.CategoryId);\n    }\n  }, []);\n\n  const getProducts = (categoryId) => {\n    api\n      .get('/product/product-by-category', {\n        params: {\n          categoryId: categoryId,\n        },\n      })\n      .then((res) => {\n        //Sorted by article number\n        let sortedProducts = sortBy(res.data.Products, 'ArticleNumber');\n\n        let attributeMap = res.data.Attributes.filter((item) => item.Type != 1);\n        let products = sortedProducts.map((item) => {\n          return {\n            ProductId: item.ProductId,\n            Artikelnr: item.ArticleNumber,\n            Beskrivning: item.Description,\n            EANCode: item.EANCode,\n            Options: attributeMap.map((option) => {\n              return { AttributeId: option.Id, Value: item[option.FieldName] };\n            }),\n          };\n        });\n        setValues({ ...category, ['Products']: products });\n      });\n  };\n\n  const addItem = (index) => {\n    let newProduct = {\n      Artikelnr: '',\n      EANCode: '',\n      Beskrivning: '',\n      Options: [],\n    };\n    const products = category.Products;\n    products.splice(index + 1, 0, newProduct);\n    setValues({ ...category, ['Products']: products });\n  };\n\n  const addOption = (index) => {\n    const products = category.Products;\n    const option = { AttributeId: '', Value: '' };\n    products[index].Options.push(option);\n    setValues({ ...category, ['Products']: products });\n  };\n\n  const handleChange = (prop) => (event) => {\n    setValues({ ...category, [prop]: event.target.value });\n  };\n\n  const handleProductPropertiesChange = (value, index, name) => {\n    const products = category.Products;\n    products[index][name] = value;\n    setValues({ ...category, ['Products']: products });\n  };\n\n  const handleOptionChange = (value, productIndex, OptionIndex, name) => {\n    const products = category.Products;\n    products[productIndex].Options[OptionIndex][name] = value;\n    setValues({ ...category, ['Products']: products });\n  };\n\n  const handleChangeWithIndex = (prop, index) => (event) => {\n    setValues({ ...category, [prop]: event.target.value });\n  };\n\n  const handleSubmit = () => {\n    if (category.CategoryId) {\n      api.put('/product-category/', category).then((response) => backToList());\n    } else {\n      api.post('/product-category/', category).then((response) => backToList());\n    }\n  };\n\n  const backToList = () => {\n    const newRoute = formatRoute('/page/Products');\n    props.history.push({\n      pathname: newRoute,\n      state: null,\n    });\n  };\n\n  return (\n    <div>\n      <Grid container item xs={6} className={classes.gridContainer}>\n        <TextField\n          fullWidth\n          id='Title'\n          label='Kategori'\n          name='Title'\n          size='small'\n          value={category.Title}\n          onChange={handleChange('Title')}\n        />\n        <br />\n        <TextField\n          fullWidth\n          multiline\n          rowsMax={4}\n          id='Description'\n          label='Beskrivning'\n          name='Description'\n          value={category.Description}\n          onChange={handleChange('Description')}\n        />\n        <TextField\n          fullWidth\n          multiline\n          rowsMax={2}\n          id='Application'\n          label='Användningsområde'\n          name='Application'\n          value={category.Application}\n          onChange={handleChange('Application')}\n        />\n        <TextField\n          fullWidth\n          id='ImageURL'\n          label='Foto URL'\n          name='ImageURL'\n          value={category.ImageURL}\n          onChange={handleChange('ImageURL')}\n        />\n      </Grid>\n      <div className={classes.outterContainer}>\n        {category.Products.map((item, index) => (\n          <div style={{ position: 'relative' }}>\n            <div className={classes.container} key={index}>\n              <div className={classes.left}> {index + 1} </div>\n              <div className={classes.componentPanelWrapper}>\n                <div className={classes.componentPanel}>\n                  <div className={classes.caption}>Artikelnr</div>\n                  <div className={classes.control}>\n                    <Input\n                      fullWidth\n                      onChange={(event) => {\n                        let { name, value } = event.target;\n                        handleProductPropertiesChange(\n                          value,\n                          index,\n                          'Artikelnr'\n                        );\n                      }}\n                      name={'Artikelnr' + index}\n                      value={item.Artikelnr}\n                      index={index}\n                      placeholder='Artikelnr'\n                      inputProps={{ 'aria-label': 'Artikelnr' }}\n                    />\n                  </div>\n                </div>\n                <div className={classes.componentPanel}>\n                  <div className={classes.caption}>EANCode</div>\n                  <div className={classes.control}>\n                    <Input\n                      fullWidth\n                      onChange={(event) => {\n                        let { name, value } = event.target;\n                        handleProductPropertiesChange(value, index, 'EANCode');\n                      }}\n                      name={'EANCode'}\n                      value={item.EANCode}\n                      placeholder='EANCode'\n                      inputProps={{ 'aria-label': 'EANCode' }}\n                    />\n                  </div>\n                </div>\n                <div className={classes.componentPanel}>\n                  <div className={classes.caption}>Beskrivning</div>\n                  <div className={classes.control}>\n                    <Input\n                      fullWidth\n                      onChange={(event) => {\n                        let { name, value } = event.target;\n                        handleProductPropertiesChange(\n                          value,\n                          index,\n                          'Beskrivning'\n                        );\n                      }}\n                      name={'Beskrivning' + index}\n                      value={item.Beskrivning}\n                      placeholder='Beskrivning'\n                      inputProps={{ 'aria-label': 'Beskrivning' }}\n                    />\n                  </div>\n                </div>\n                <div className={classes.componentPanel}>\n                  <div className={classes.moreInfoContainer}>\n                    <div className={classes.caption}>Mer information</div>\n                    <div className={classes.control}>\n                      {/* More info div; OK */}\n                      <div className={classes.moreInfoControlWrapper}>\n                        {/* More info control table */}\n                        <div style={{ border: '1px solid' }}>\n                          <div className={classes.moreInfoControl}>\n                            <div className={classes.cellIndexPanel}></div>\n                            <div\n                              style={{\n                                flex: 1,\n                                borderLeft: '1px solid',\n                                borderRight: '1px solid',\n                                height: '100%',\n                                paddingLeft: 4,\n                                paddingTop: 10,\n                              }}\n                            >\n                              Benämning\n                            </div>\n                            <div\n                              style={{\n                                flex: 1,\n                                borderRight: '1px solid',\n                                height: '100%',\n                                paddingLeft: 4,\n                                paddingTop: 10,\n                              }}\n                            >\n                              Data\n                            </div>\n                            <div className={classes.cellIndexPanel}></div>\n                          </div>\n                          {item.Options.map((item, optionIndex) => (\n                            <div\n                              className={classes.moreInfoControl}\n                              key={optionIndex}\n                            >\n                              <div\n                                className={clsx(\n                                  classes.cellIndexPanel,\n                                  classes.cellIndexRowColor\n                                )}\n                              >\n                                <div className={classes.left}>\n                                  {optionIndex + 1}\n                                </div>\n                              </div>\n                              <div\n                                style={{\n                                  flex: 1,\n                                  borderLeft: '1px solid',\n                                  borderRight: '1px solid',\n                                  height: '100%',\n                                  padding: 2,\n                                }}\n                              >\n                                <Select\n                                  fullWidth\n                                  native\n                                  value={item.AttributeId}\n                                  name={'AttributeId'}\n                                  onChange={(event) => {\n                                    let { name, value } = event.target;\n                                    handleOptionChange(\n                                      value,\n                                      index,\n                                      optionIndex,\n                                      name\n                                    );\n                                  }}\n                                  inputProps={{\n                                    name: 'AttributeId',\n                                    id: 'age-native-simple',\n                                  }}\n                                >\n                                  <option aria-label='None' value='' />\n                                  {attributes.map((item) => (\n                                    <option value={item.Id}>\n                                      {item.Title}\n                                    </option>\n                                  ))}\n                                </Select>\n                              </div>\n                              <div\n                                style={{\n                                  flex: 1,\n                                  borderRight: '1px solid',\n                                  height: '100%',\n                                  padding: 2,\n                                }}\n                              >\n                                <Input\n                                  fullWidth\n                                  placeholder='Data'\n                                  value={item.Value}\n                                  name={'Value'}\n                                  onChange={(event) => {\n                                    let { name, value } = event.target;\n                                    handleOptionChange(\n                                      value,\n                                      index,\n                                      optionIndex,\n                                      name\n                                    );\n                                  }}\n                                  inputProps={{\n                                    'aria-label': 'Value',\n                                  }}\n                                />\n                              </div>\n                              <div\n                                className={clsx(\n                                  classes.cellIndexPanel,\n                                  classes.cellIndexRowColor\n                                )}\n                              ></div>\n                            </div>\n                          ))}\n                        </div>\n                        {/* button to add more row; OK */}\n                        <div\n                          style={{\n                            paddingTop: 10,\n                            textAlign: 'right',\n                          }}\n                        >\n                          <Button\n                            onClick={() => {\n                              addOption(index);\n                            }}\n                            color='secondary'\n                            variant='contained'\n                          >\n                            Lägg till rad\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className={classes.right}>\n                {/* <div>\n                  <IconButton\n                    color='secondary'\n                    size='small'\n                    onClick={() => {\n                      addItem(index);\n                    }}\n                  >\n                    <AddCircleOutlineIcon />\n                  </IconButton>\n                </div> */}\n              </div>\n            </div>\n            <div\n              style={{\n                position: 'absolute',\n                right: -1,\n                bottom: -15,\n                zIndex: 100,\n              }}\n            >\n              {' '}\n              <IconButton\n                color='secondary'\n                size='small'\n                onClick={() => {\n                  addItem(index);\n                }}\n              >\n                <AddCircleOutlineIcon />\n              </IconButton>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div style={{ paddingTop: 10, margin: 20, textAlign: 'right' }}>\n        <Button\n          onClick={() => {\n            handleSubmit();\n          }}\n          color='secondary'\n          variant='contained'\n        >\n          Skapa\n        </Button>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}